import { sendSystemEmail, sendUserEmail } from '../utils/sendEmail.js';

// 游닏 Confirmaciones autom치ticas
export const sendConfirmationEmail = async (req, res) => {
  const { to, subject, message } = req.body;
  const html = `<h2>${subject}</h2><p>${message}</p>`;
  try {
    await sendSystemEmail(to, subject, html);
    res.json({ success: true, message: 'Correo autom치tico enviado' });
  } catch (error) {
    res.status(500).json({ success: false, message: 'Error al enviar correo autom치tico', error: error.message });
  }
};

// 游눫 Respuestas manuales (usa credenciales del usuario autenticado)
export const sendManualResponse = async (req, res) => {
  const { to, subject, message, senderName } = req.body; // <-- agregamos senderName opcional
  const html = `<p>${message}</p>`;

  try {
    await sendUserEmail(to, subject, html, senderName); // <-- lo pasamos a la funci칩n
    res.json({ success: true, message: 'Correo manual enviado correctamente' });
  } catch (error) {
    res.status(500).json({ success: false, message: 'Error al enviar correo manual', error: error.message });
  }
};
